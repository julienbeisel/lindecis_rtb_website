<html>

<head>
	<title>RING THE BELL</title>
	<link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="https://unpkg.com/98.css">
</head>

<body>


	<div class="mainContainer">


		<div id="leaf" class="leaf">
			<div id="song-buildup">BUILDUP</div>
			<div id="song-945">9.45</div>
			<div id="song-satellite">SATELLITE ft. The Kount</div>
			<div id="song-onehundred">ONEHUNDRED</div>
			<div id="song-miles">MILES</div>
			<div id="song-letsgo">LETSGO! ft. Sadtoi</div>
			<div id="song-letgo">LETGO ft. Mary</div>
			<div id="song-flip">FLIP</div>
			<div id="song-thirtyseven">THIRTYSEVEN</div>
			<div id="song-strained">STRAINED</div>
		</div>

		<div id="youtube-video" class="youtube-embed">

			<div class="window">
				<div class="title-bar">
					<div class="title-bar-text" style="font-size: 20;">Ring the bell</div>
					<div class="title-bar-controls">
						<button aria-label="Minimize"></button>
						<button aria-label="Maximize"></button>
						<button aria-label="Close"></button>
					</div>

				</div>
				<div class="window-body">
					<iframe id="youtube-video-iframe" class="youtube-video" width="560" height="315"
						src="https://www.youtube.com/embed/hJCW9YI2r0k" title="YouTube video player" frameborder="0"
						allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
						allowfullscreen></iframe>

				</div>
			</div>
		</div>


		<div class="imgContainer">


			<img class="gif" src="assets/images/cropped_impactBell.gif" id="ondes" ;>
			<img class="logo" src="assets/images/bell.png" id="imgClickAndChange" ; />





		</div>


		<div id="menu" class="menuContainer">
			<div id="vinyl"><button style="font-size:30">Vinyl</button></div>
			<div id="stream"><button style="font-size:30">Stream</button></div>
			<div id="about"><button style="font-size:30">About</button></div>
		</div>


		<div class="window" style="position: absolute;
		left: 90%;
		top: 20%;
		width:15vw;
		transform: translate(-50%, -50%);
		font-size: 20;">
			<div class="title-bar">
				<div class="title-bar-text" style="font-size: 20;">Clock</div>
			</div>

			<div id="clock" class="window-body" style="font-size: 20;">
				<div id="value-clock" style="font-size: 20;">00:00</div>
				<input id="input-pswrd" type="text" style="display:none" />
			</div>
		</div>

	</div>
</body>

</html>
<script>
	var audio = new Audio('assets/sounds/bellringing_trimmed.wav');
	audio.preload = "auto"

	var click = 0;

	var DEFAULT_VIDEO = "https://www.youtube.com/embed/hJCW9YI2r0k"


	var current_hour = 0


	function changeImage() {
		document.getElementById("imgClickAndChange").src = "assets/images/bellPush.png";
	}

	function resetImage() {
		document.getElementById("imgClickAndChange").src = "assets/images/bell.png";
	}


	function changeCursor() {
		document.body.style.cursor = "url('assets/images/handCursorClicked.cur'),auto";
	}

	function resetCursor() {
		document.body.style.cursor = "url('assets/images/handCursor.cur'),auto";
	}


	function play() {
		audio.pause()
		audio.currentTime = 0;

		audio.play();
	}


	function impact() {
		var element = document.getElementById('ondes');

		element.style.opacity = 100;
		element.style.filter = 'alpha(opacity=90)'; // IE fallback

		let animationDelay = 1000
		let oldclick = click;
		setTimeout(() => {
			element.style.opacity = 0;
		}, animationDelay + 20);
	}

	function showMenu() {


		if (click === 2) {
			document.getElementById('vinyl').style.display = "block";
			document.getElementById('stream').style.display = "block";
			document.getElementById('about').style.display = "block";

			let opacity = 1

			document.getElementById('vinyl').style.opacity = opacity;
			document.getElementById('stream').style.opacity = opacity;
			document.getElementById('about').style.opacity = opacity;
		}

	}

	function update_hour(hour) {

		hour = hour + 15

		if (hour > 60 * 12) {
			hour = 0
		}

		return (hour)
	}

	function display_hour() {

		let hours = Math.floor(current_hour / 60, 0)
		let minutes = current_hour - hours * 60

		let txt_to_display = String(hours).padStart(2, "0") + ":" + minutes

		if (current_hour == 60 * 9 + 45) {
			document.getElementById("input-pswrd").style.display = 'block'
		}
		else {
			document.getElementById("input-pswrd").style.display = 'none'
		}
		document.getElementById("value-clock").innerHTML = txt_to_display



	}

	// BELL
	// Events triggered on click

	document.getElementById("imgClickAndChange").addEventListener('mousedown', e => {
		play();
		changeCursor();
		changeImage();
		impact();
		showMenu();
		current_hour = update_hour(current_hour)
		display_hour();
	});

	// Events reset after mouse up

	document.getElementById("imgClickAndChange").addEventListener('mouseup', e => {
		resetCursor();
		resetImage();
		click = click + 1

		if (click === 2) {
			document.getElementById('youtube-video').style.display = "block";
		}
		if (click === 6) {
			document.getElementById("leaf").style.display = "block";
		}
	})


	// Switch songs

	document.getElementById("song-buildup").addEventListener('mousedown', e => {
		document.getElementById("youtube-video-iframe").src = "https://www.youtube.com/embed/LwgCbCX11GQ"
	})
	document.getElementById("song-945").addEventListener('mousedown', e => {
	})
	document.getElementById("song-satellite").addEventListener('mousedown', e => {
		document.getElementById("youtube-video-iframe").src = "https://www.youtube.com/embed/_zs9k7oVhrY"
	})
	document.getElementById("song-onehundred").addEventListener('mousedown', e => {
		document.getElementById("youtube-video-iframe").src = "https://www.youtube.com/embed/54rR6hcvXHw"
	})
	document.getElementById("song-miles").addEventListener('mousedown', e => {
		document.getElementById("youtube-video-iframe").src = "https://www.youtube.com/embed/MN87j1h1x-w"
	})
	document.getElementById("song-letsgo").addEventListener('mousedown', e => {
		document.getElementById("youtube-video-iframe").src = "https://www.youtube.com/embed/KIwon8eIANw"
	})
	document.getElementById("song-letgo").addEventListener('mousedown', e => {
		document.getElementById("youtube-video-iframe").src = "https://www.youtube.com/embed/DbGevmnbtLk"
	})
	document.getElementById("song-flip").addEventListener('mousedown', e => {
	})
	document.getElementById("song-thirtyseven").addEventListener('mousedown', e => {
		document.getElementById("youtube-video-iframe").src = "https://www.youtube.com/embed/_zs9k7oVhrY"
	})
	document.getElementById("song-strained").addEventListener('mousedown', e => {
	})
</script>