<html>

<head>
	<title>RING THE BELL</title>
	<link rel="stylesheet" href="style.css">
</head>

<body>

	<div class="mainContainer">

		<div class="imgContainer">


			<img class="gif" src="assets/images/cropped_impactBell.gif" id="ondes" ;>
			<img class="logo" src="assets/images/bell.png" id="imgClickAndChange" ; />
			<div id="youtube-video" class="youtube-embed">
				<button id="x">
					X
				</button>
				<iframe class="youtube-video" width="560" height="315" src="https://www.youtube.com/embed/yMuPq-mmMHQ"
					title="YouTube video player" frameborder="0"
					allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
					allowfullscreen></iframe>
			</div>



		</div>
		<div id="menu" class="menuContainer">
			<div id="vinyl">Vinyl</div>
			<div id="stream">Stream</div>
			<div id="about">About</div>
		</div>

	</div>


</body>

</html>

<script>
	var audio = new Audio('assets/sounds/bellringing_trimmed.wav');
	audio.preload = "auto"

	var click = 0;


	function changeImage() {
		document.getElementById("imgClickAndChange").src = "assets/images/bellPush.png";
	}

	function resetImage() {
		document.getElementById("imgClickAndChange").src = "assets/images/bell.png";
	}


	function changeCursor() {
		document.body.style.cursor = "url('assets/images/handCursorClicked.cur'),auto";
	}

	function resetCursor() {
		document.body.style.cursor = "url('assets/images/handCursor.cur'),auto";
	}


	function play() {
		audio.pause()
		audio.currentTime = 0;

		audio.play();
	}


	function impact() {
		var element = document.getElementById('ondes');

		element.style.opacity = 100;
		element.style.filter = 'alpha(opacity=90)'; // IE fallback

		let animationDelay = 1000
		let oldclick = click;
		setTimeout(() => {
			element.style.opacity = 0;
		}, animationDelay + 20);


	}

	function showMenu() {


		if (click === 2) {
			document.getElementById('vinyl').style.display = "block";
			document.getElementById('stream').style.display = "block";
			document.getElementById('about').style.display = "block";

			let opacity = 1

			document.getElementById('vinyl').style.opacity = opacity;
			document.getElementById('stream').style.opacity = opacity;
			document.getElementById('about').style.opacity = opacity;
		}



	}

	// BELL
	// Events triggered on click

	document.getElementById("imgClickAndChange").addEventListener('mousedown', e => {
		play();
		changeCursor();
		changeImage();
		impact();
		showMenu();
	});

	// Events reset after mouse up

	document.getElementById("imgClickAndChange").addEventListener('mouseup', e => {
		resetCursor();
		resetImage();
		click = click + 1

		if (click === 5) {
			document.getElementById("imgClickAndChange").style.display = "none";
			document.getElementById('menu').style.display = "none";
			document.getElementById('youtube-video').style.display = "block";

		}
	});

	// YOUTUBE

	document.getElementById("x").addEventListener('mousedown', e => {

		changeCursor();

		document.getElementById('youtube-video').style.display = "none";
		document.getElementById("imgClickAndChange").style.display = "block";
		document.getElementById('menu').style.display = "flex";
		document.getElementById('menu').style.opacity = 1;
		document.getElementById('menu').style.animation = "none";
		document.getElementById('menu').style.transition = "none";

	});

	// Events reset after mouse up

	document.getElementById("x").addEventListener('mouseup', e => {
		resetCursor();
	});
</script>